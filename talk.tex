\usepackage[utf8]{inputenc}
\usepackage{listings}
\usepackage{textcomp}

\title{Robot Nitpicks}
\subtitle{Never send a human to do a machine's job}
\author{Moshe Zadka -- https://cobordism.com}
\date{PyBay 2018}
 
\begin{document}
 
\begin{titlepage}
\maketitle
\end{titlepage}

\frame{\titlepage}

\begin{frame}
\frametitle{The Easiest Most Useless Code Review}
\begin{itemize}
\item Mechanical
\item Annoying
\end{itemize}
\end{frame}

The easiest,
most useless,
code review is the one that goes line by line,
nearly context free,
and comments on style or best practices violations.
Examples are "there is a missing space before the +"
and "this expression is too deeply nested".

The more self-aware variant of this will precede the comment
with a "nit" or "nitpick".
Nitpicks are not useful,
but are easy to give.

There is no need for humans to enforce that.
Computers can check for spaces.
Computers can check for nesting levels of expressions.
Computers can identify the :code:`for/append`
pattern and suggest a list comprehension.

\begin{frame}
\frametitle{Why?}
\begin{itemize}
\item Speed bumps
\item Feeling useful
\end{itemize}
\end{frame}

So why do people do that?
Some of the more toxic variety is the
"speed bump" motivation.
This developer wants,
for whatever reason,
to delay the PR.
Maybe they think the underlying feature is a bad idea.
Maybe they had a fight with the submitting developer.
Regardless,
this is a pretty toxic motivation,
and we are better off being charitable.

The more common motivation is feeling useful.
Often new developers,
or ones with little experience,
or ones with imposter syndrome,
want to make sure they count as "being useful".
The mindless make-work of "point out all nits"
is visible,
and is guaranteed to finish successfully in a well-known amount of time.
While this motivation is not toxic per-se,
it is definitely not a good sign!

\begin{frame}
\frametitle{Why not?}
\begin{itemize}
\item Team solidarity
\item Mentor and help
\end{itemize}
\end{frame}

It is important to remove the ability to use the nitpick as a crutch.
This will force the developer to recognize they are in over their head,
and need help.
Good teams help each other.
The team recognition that someone needs help is valuable.
They can be paired up with a mentor,
or use pair programming
or figure out other ways to get them up to speed.

\begin{frame}
\frametitle{Nits}
A taxonomy.
\end{frame}

Nits come in all shapes and sizes.
Since this is a talk about how to get robots to do them,
it is important to be clear them.
What we have not clarified properly to ourselves
is very hard to teach a program to do.
So the discussion,
nitpicky as it seems,
is critical to finding solutions.

\begin{frame}
\frametitle{Coding Style}
Cite chapter and verse.
\end{frame}

The classic nitpick is the coding style nitpick.
It does not matter where the style comes from --
official style,
one of the many guides published by companies
or even a house style.
This nitpick enforces "Section 3, bullet 2"
of the coding style guidelines.

\begin{frame}
\frametitle{Example -- Line length}
\begin{itemize}
\item PEP-8 says 80
\item Black says 88
\item Some say 100, 120...
\item Literally just counting
\end{itemize}
\end{frame}

The ur-example is the line length.
Presumably the team has already decided on a specific max length.
Regardless of which length,
this comment is literally just counting characters.
Probably not manually, either --
just letting an editor tool count them.
It adds nothing useful to the discussion.

\begin{frame}
\frametitle{Consistency}
Compare two places,
ask why.
\end{frame}

Why did you choose to address X here this way,
but then address X there this other way?
This is inconsistent.
Especially annoying if the places are far apart,
and the need for consistency is somewhat irrelevant.

\begin{frame}[fragile]
\frametitle{Example -- Literals or constructors}
\begin{itemize}
\item \verb|{}| vs \verb|dict()|
\item Paint the bikeshed fluourescent green
\end{itemize}
\end{frame}

Either there is a specific house style asking for one or the other,
or there is not.
If there is, see previous example.
In the more common case where there is none,
asking for consistency is not useful.
Maybe in one place \verb|dict()| is more useful
(for example, it is supposed to look symmetric to something else)
whereas in another place,
the slight speed-up from using \verb|{}| is worth it.
If there is a specific overriding concern with one or the other,
raise it.
Otherwise, do not worry.

\begin{frame}
\frametitle{Best Practices}
Plethora to pick from!
\end{frame}

\begin{frame}
\frametitle{Local Practices}
Especially annoying to new people.
\end{frame}

\begin{frame}
\frametitle{Example -- No print}
...or fluourescent pink.
\end{frame}

\begin{frame}
\frametitle{Humans are inconsistent}
Easy to miss exceptions!
\end{frame}

\begin{frame}
\frametitle{Humans get tired}
"I've done most files in this PR."
\end{frame}

\begin{frame}
\frametitle{Delay tactics}
"I'm going to comment on every single line."
\end{frame}

\begin{frame}
\frametitle{One upping}
"I'm aware of the obscure rules in our local style guide,
as well as historical versions of PEP-8"
\end{frame}

\begin{frame}
\frametitle{Time pressure}
"QA needs this yesterday,
I don't have time to fix all of that at the last minute!"
\end{frame}

\begin{frame}
\frametitle{Annoyance}
"You're just doing this to me because..."
\end{frame}

\begin{frame}
\frametitle{Configuring linters}
Make the linter reflect current consensus.
\end{frame}

\begin{frame}
\frametitle{Linter plugin}
If the linter doesn't do something,
implement it.
\end{frame}

\begin{frame}
\frametitle{Ad-hoc programs}
Just write a little script to check for copyright notices.
\end{frame}

\begin{frame}
\frametitle{CI intergration}
Automatic CI failure blocking merge on Lint errors.
\end{frame}

\begin{frame}
\frametitle{Supporting legacy with diff}
Only run lint on files in diff
(or only fail on lint errors in diff)
\end{frame}

\begin{frame}
\frametitle{Supporting legacy with white lists}
Keep list of current failures,
ignore "known" failures.
\end{frame}

\begin{frame}
\frametitle{Simple rule}
If CI doesn't care,
the humans don't care!
\end{frame}

\begin{frame}
\frametitle{Summary}
\begin{itemize}
\item Humans gonna human
\item Use that, don't fight that
\end{itemize}
\end{frame}

\end{document}
